<!--Designed and coded by Aya Eid: aeid@iit.edu -->
<html>
<head>
<title>Interact With Collagen!</title> 
	<script src="jmol/Jmol.js" type="text/javascript" ></script>

	<script language="javascript"> 		
		//Defining global variables	
		var sitesPickedL=[1,0,0];  //DEFAULT there are no sites picked - length SHOULD BE UPDATED WHEN A NEW MOLECULE IS CHOSEN
		var sitesPickedR=[1,0,0];
		var hoverMsgL=new Array(10); //DEFAULT NUMBER OF MOLECULES
		var hoverMsgR=new Array(10);
		var hoverColorL=["","red","orange"];
		var hoverColorR=["","red","orange","yellow","lime","teal","green","cyan","blue","purple","red","orange","yellow","lime","green","blue","purple"];
		var aMapL=0; 	//value indicating accessibility map is off
		var aMapR=0; 	//value indicating accessibility map is off	
		var aSize=new Array(35,35);  //left image,right image
		var bSize=new Array(.25,.25);
		var stringerL;
		var stringerR;
	</script>	

<!-- This loads the function for the custom hover and defines it parameters.  Determins which model is shown, and picks out the color, style and message of the hover -->
	<script type="text/javascript" src="fcustomHoverL.js"></script>
	<script type="text/javascript" src="fcustomHoverR.js"></script>
	<script type="text/javascript" src="onLoad.js" ></script>
	<script type="text/javascript" src="feedBack.js" ></script>
</head>
<body onload="onLoadFunc();">
      <script type="text/javascript">
    	jmolInitialize("jmol"); 
      </script>
	 <input onClick="location.href='dual.html'" type="button" value="Dual Molecules"/> 
	  
	  <table border="1" align="center">		<!--This centers it on the page-->
		<tr align="center">		<!--This centers it within the table-->
			<td width=200>  <!--Left Menu-->
				</br>
				<b><i>Choose Molecule</i></b>
				</br>
				<form name="molChooseLeft" method="post">
				<select id="mydropdownL" onChange="molSelectL(this.options[this.selectedIndex].value)" style="width: 190px" >	
							<optgroup label="Choose Molecule">
							<option value="practiceLeft">Practice Left</option>
						</optgroup>
						<optgroup label="Collagen">
							<option value="Collagen1">Collagen Type I</option>
							<option value="Collagen3">3 Microfibrils</option>
						</optgroup>
						<optgroup label="Ligands">	
							<option value="Decorin">Decorin</option>
							<option value="Biglycan">Biglycan</option>
						</optgroup>
					</select>
				</form>
	
				<!--Defines the DEFAULT sites listed for left side-->
				<form name="siteListL">
					<select name="selSiteL" id="selSiteL" multiple style="width: 190px" size=7>
						<optgroup label="Binding Sites"></optgroup>	
							<option value="1" selected="selected">No Sites</option>
							<option value="2">Default Site 1</option>
							<option value="3">Default Site 2</option>
						

						<script type="text/javascript">
							hoverMsgL[0]=new Array(2)
							hoverMsgL[0][1]="Default Site1"
							hoverMsgL[0][2]="Default Site2"
						</script>		
					</select>
					
					<select name="selMutL" id="selMutL" multiple style="width: 190px" size=4>
						<optgroup label="Mutation Sites"></optgroup>	
							<option value="1" selected="selected">No Sites</option>
							<option value="2">Default Site 1</option>
							<option value="3">Default Site 2</option>
						

						<script type="text/javascript">
							hoverMsgMutL[0]=new Array(2)
							hoverMsgMutL[0][1]="Default Site1"
							hoverMsgMutL[0][2]="Default Site2"
						</script>		
					</select>	
					
					<input onclick="acceptMoleculeL();" type="button" value="Display" />
				</form>
				
				
				<!-------ACCESSIBILITY MAP---->
				<div align="center">
					<input onClick="accessMap('L');" type="button" value="Show Accessibility Map" />
				</div>
				</br>				
				

				<div align="center"><i><b>Display Settings</b></i></div>
<!----------Defines the type of display (ball and stick, carbon trace, or ribbon) for chosen image----------------------->
						<font size="2">
						<div align="center">
						<input type="checkbox" id="BnSLeft" onclick="imageStyle('Left')" checked>BallnStick
						<input type="checkbox" id="TraceLeft" onclick="imageStyle('Left')" unchecked>Trace
						<input type="checkbox" id="RibLeft" onclick="imageStyle('Left')" unchecked>Ribbons
						</div>

						</br>
						<b>Ball N Stick Settings</b>
						</br>
						Atoms:
						<input type="radio" id="AoffLeft" name="atomsL" onClick="Atoms('Left')">	off
						<input type="radio" id="A35Left" name="atomsL" onClick="Atoms('Left')" checked>35%
						<input type="radio" id="A100Left" name="atomsL" onClick="Atoms('Left')">	100%
						
		<!-----------------------------------------------Bonds-------------------------------------------------------->
						</br>
						Bonds: 
						<input type="radio" id="BoffLeft" name="bondsL" onClick="Bonds('Left')">		off
						<input type="radio" id="B25Left" name="bondsL" onClick="Bonds('Left')" checked>	25%
						<input type="radio" id="B50Left" name="bondsL" onClick="Bonds('Left')">		50%
						</br></br>
						
					
						
						<b>Color</b>
						</br>
						
						</font>
						<script type="text/javascript">
						//This portion is not selective to the image chosen
							// Background Color menu:
							jmolSetTarget('Left');
							jmolHtml("Background: ");
							jmolMenu([
							["background black","Black"],
							["background white","White"],
							["background skyblue","Blue"],
							["background yellow","Yellow"],
							["background salmon","Salmon"],
							["background palegreen","Green"]]);
							jmolBr();	
							
							jmolHtml("Atom: ");
							jmolMenu([
							["select all;color atoms cpk","Default"],
							["select all;color atoms white","White"],
							["select all; color atoms black","Black"],
							["select :a;color lightyellow;select :b;color lightgrey;select :c;color lightsalmon;select all","By Chain"]]);
							jmolBr();
						</script>	
						
								
						
						<!--Allows selected model to start or stop spinning -->
						<input onClick="Spin('Left');" type="button" value="Spin" />
			</td>
			<td>	<!--Left Jmol Applet-->
				
			<table>
				<tr>
					<td>
						<img src ="arrowZoom.png" border="0" width="100" height="72" alt="navigate" usemap ="#navigate"/>
						<map name="navigate">
						  <area shape="rect" coords="38,0,62,25" href="javascript:void(0)" onclick="translate('Left','U')" alt="up"/>
						  <area shape="rect" coords="0,24,29,47" href="javascript:void(0)" onClick="translate('Left','L')" alt="left"/>
						  <area shape="rect" coords="71,24,100,47" href="javascript:void(0)" onClick="translate('Left','R')" alt="right"/>
						  <area shape="rect" coords="38,46,62,72" href="javascript:void(0)" onclick="translate('Left','D')" alt="down"/>
						  <area shape="circle" coords="40,36,10" href="javascript:void(0)" onClick="zoomScreen('Left','in')" alt="zoomIn" />
						  <area shape="circle" coords="60,36,10" href="javascript:void(0)" onClick="zoomScreen('Left','out')" alt="zoomOut" />
						</map>
					</td>
				</tr>
			</table>
				
					
				<script type="text/javascript">
					//LEFT IMAGE
					jmolApplet([725,400],'load jmol/models/practice.pdb;background white;set hoverCallback "customhoverL";select all;spacefill 35%;wireframe .25;color cpk;zoom 120;define site1 atomno=1, atomno=3; define site2 atomno=2;','Left')
				</script>
					
				
				
				
				<!--CONTROLS FOR TRANSLATION AND ZOOM UNDERNEATH LEFT APPLET-->
				
				<form name="searchL">
					<font size="3">Search AA Sequence: </font>
					<input type="text" id="searchLeft" name="sequenceL" size="50" onkeypress="return event.keyCode!=13"/>
					<input type="button" onClick="searchSeq('Left','Next')" value="Next">
					<input type="button" onClick="searchSeq('Left','All')" value="All">
					<input type="button" onClick="searchSeq('Left','Clear')" value="Clear">
				</form>	
					
					<input type="button" onClick="feedBack()" value="Provide Feedback!">
				
			</td>

			<td width=200>  <!--Right Menu-->
				<TABLE> 
					
					<form action="feedback.php">
					<TR><th colspan="2"><u><br>Feedback is Appreciated</u><br><br></th></TR>
					<tr>
						<td>Name:</td>
						<td><input type="text" name="FirstName" style="width: 150px"></td>
					</tr>
										<tr>
						<td>Email:</td>
						<td><input type="text" name="Email" style="width: 150px"></td>
					</tr>
					<tr>
						<td><font size="2">Affiliation:</font></td>
						<td><input type="text" name="Affiliation" style="width: 150px"></td>
					</tr>
					<tr>
						<td valign="top">Message:</td>
						<td><textarea name="Message" align="top" style="width: 150px; height: 200px"></textarea></td>
					</tr>	
					<tr>
					<td></td>
					<td align="center"><input type="submit" value="Submit"></form></td>
					<tr>
					
				</TABLE>
			</td>
		</tr>
	  </table>
	  
	  
	
1.   Sweeney S et al. (2008) Candidate cell and matrix interaction domains on the collagen fibril, the predominant protein of vertebrates. J. Biol Chem.  283:21187-97.
</br>
2.   Perumal S, Antipova O, Orgel J (2008) Collagen fibril architecture, domain organization, and triple-helical conformation govern its proteolysis.  Proc Natl Acad Sci USA.  105:2824-9.
</br>
3.   Orgel J, Irving T, Miller A, Wess T (2006) Microfibrillar structure of type I collagen in situ.  Proc Natl Acad Sci USA.  103:9001-5
  



	<script type="text/javascript">
		function translate(imageSel,direction)
		{	if(direction=="L"){jmolScript("move 0 0 0 0 -20 0 0 0 .3;",imageSel)}
			else if(direction=="R"){jmolScript("move 0 0 0 0 20 0 0 0 .3;",imageSel)}
			else if(direction=="U"){jmolScript("move 0 0 0 0 0 -20 0 0 .3;",imageSel)}
			else if(direction=="D"){jmolScript("move 0 0 0 0 0 20 0 0 .3;",imageSel)}
			else {return}
		}

		function zoomScreen(imageSel,direction)
		{	if(direction=='in'){jmolScript("move 0 0 0 70 0 0 0 0 .2;",imageSel);}
			else if(direction=='out'){jmolScript("move 0 0 0 -70 0 0 0 0 .2;",imageSel);}
			else {return}
		}
	</script>	  
	
	<!--This calls the function to load in the model chosen, changes the sites displayed in the menu, and defines the sites-->
	<script type="text/javascript" src="fmolSelect.js"></script>
	<script type="text/javascript" src="fmolSelectL.js"></script>
	<script type="text/javascript" src="fmolSelectR.js"></script>

	<!-- This loads the function for the search sequence option -->
	<script type="text/javascript" src="fsearchSeq.js"></script>

	<!-- This loads the function for the accessibility Map option -->
	<script type="text/javascript" src="faccessMap.js"></script>

	<!-- This loads the function for the display settings -->
	<script type="text/javascript" src="display.js"></script>

	<!-- These accept the sites that have been selected from the menu NOT A DROP DOWN MENU- they display the sites on the model -->
	<script language="javascript"> 		
			// Indexed as 0 = no sites, 1 is first site...
			//Because this "if" statement is separate, if you choose anything As Well As the "No Sites" option, no sites will be displayed
		function acceptMoleculeL(){
			var myListL = document.getElementById("selSiteL");
			var myListCountL = myListL.options.length; // number of Sites	
			if(myListL.options[0].selected == true){
				myListL.options[0].style.backgroundColor='yellow';
				sitesPickedL=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
				jmolScript('select all;isosurface off;halos off','Left');	
				for (i=1; i < myListCountL; i++){myListL.options[i].style.backgroundColor='white';}
			}
			else{
				myListL.options[0].style.backgroundColor='white';
				sitesPickedL[0]=0;
				for (i=1; i < myListCountL; i++){ 			
					if (myListL.options[i].selected == true && sitesPickedL[i]==0){ //if checked, but hasn't been selected, then select it (add site surface)
						//MAKE THE OPTION IN THE MENU HIGHLIGHT
						myListL.options[i].style.backgroundColor='yellow';
						sitesPickedL[i]=1;
						//jmolScript('select site'+i+'; halos 5%; color halos '+hoverColorL[i]+'','Left'); 
						jmolScript('select site'+i+';isosurface sCol'+i+' fill nomesh; color isosurface '+hoverColorL[i]+'','Left'); 
						
						//ORIGINAL
						//jmolScript('select site'+i+';isosurface id sCol'+i+' molecular; color isosurface '+hoverColorL[i]+'','Left'); 

					}
					else if (myListL.options[i].selected == false && sitesPickedL[i]==1){	//if unchecked, but is selected, unselect it (remove site surface)
						myListL.options[i].style.backgroundColor='white';
						sitesPickedL[i]=0;	
						jmolScript('select site'+i+';halos off;isosurface sCol'+i+' off;','Left');
					}
				}
			}
		}	
	</script>
		</body>
</html>